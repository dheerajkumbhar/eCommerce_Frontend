{"ast":null,"code":"import _objectSpread from\"C:/redmango_frontend/react_redMango/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import jwt_decode from\"jwt-decode\";import{SD_Roles}from\"../Utility/SD\";import{jsx as _jsx}from\"react/jsx-runtime\";const withAdminAuth=WrappedComponent=>{return props=>{var _localStorage$getItem;const accessToken=(_localStorage$getItem=localStorage.getItem(\"token\"))!==null&&_localStorage$getItem!==void 0?_localStorage$getItem:\"\";if(accessToken){const decode=jwt_decode(accessToken);if(decode.role!==SD_Roles.ADMIN){window.location.replace(\"/accessDenied\");return null;}}else{window.location.replace(\"/login\");return null;}return/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({},props));};};export default withAdminAuth;","map":{"version":3,"names":["jwt_decode","SD_Roles","jsx","_jsx","withAdminAuth","WrappedComponent","props","_localStorage$getItem","accessToken","localStorage","getItem","decode","role","ADMIN","window","location","replace","_objectSpread"],"sources":["C:/redmango_frontend/react_redMango/src/HOC/withAdminAuth.tsx"],"sourcesContent":["import jwt_decode from \"jwt-decode\";\r\nimport { SD_Roles } from \"../Utility/SD\";\r\n\r\nconst withAdminAuth = (WrappedComponent: any) => {\r\n  return (props: any) => {\r\n    const accessToken = localStorage.getItem(\"token\") ?? \"\";\r\n\r\n    if (accessToken) {\r\n      const decode: {\r\n        role: string;\r\n      } = jwt_decode(accessToken);\r\n\r\n      if (decode.role !== SD_Roles.ADMIN) {\r\n        window.location.replace(\"/accessDenied\");\r\n        return null;\r\n      }\r\n    } else {\r\n      window.location.replace(\"/login\");\r\n      return null;\r\n    }\r\n\r\n    return <WrappedComponent {...props} />;\r\n  };\r\n};\r\n\r\nexport default withAdminAuth;\r\n"],"mappings":"wHAAA,MAAO,CAAAA,UAAU,KAAM,YAAY,CACnC,OAASC,QAAQ,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEzC,KAAM,CAAAC,aAAa,CAAIC,gBAAqB,EAAK,CAC/C,MAAQ,CAAAC,KAAU,EAAK,KAAAC,qBAAA,CACrB,KAAM,CAAAC,WAAW,EAAAD,qBAAA,CAAGE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,UAAAH,qBAAA,UAAAA,qBAAA,CAAI,EAAE,CAEvD,GAAIC,WAAW,CAAE,CACf,KAAM,CAAAG,MAEL,CAAGX,UAAU,CAACQ,WAAW,CAAC,CAE3B,GAAIG,MAAM,CAACC,IAAI,GAAKX,QAAQ,CAACY,KAAK,CAAE,CAClCC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,eAAe,CAAC,CACxC,MAAO,KAAI,CACb,CACF,CAAC,IAAM,CACLF,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,QAAQ,CAAC,CACjC,MAAO,KAAI,CACb,CAEA,mBAAOb,IAAA,CAACE,gBAAgB,CAAAY,aAAA,IAAKX,KAAK,CAAG,CAAC,CACxC,CAAC,CACH,CAAC,CAED,cAAe,CAAAF,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}