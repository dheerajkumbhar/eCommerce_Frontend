{"ast":null,"code":"import React,{useState}from\"react\";import{useLoginUserMutation}from\"../Apis/authApi\";import{inputHelper}from\"../Helper\";import jwt_decode from\"jwt-decode\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{setLoggedInUser}from\"../Storage/Redux/userAuthSlice\";import{MainLoader}from\"../Components/Page/Common\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[error,setError]=useState(\"\");const[loginUser]=useLoginUserMutation();const[loading,setLoading]=useState(false);const dispatch=useDispatch();const navigate=useNavigate();const[userInput,setUserInput]=useState({userName:\"\",password:\"\"});const handleUserInput=e=>{const tempData=inputHelper(e,userInput);setUserInput(tempData);};const handleSubmit=async e=>{e.preventDefault();setLoading(true);const response=await loginUser({userName:userInput.userName,password:userInput.password});if(response.data){const{token}=response.data.result;const{fullName,id,email,role}=jwt_decode(token);localStorage.setItem(\"token\",token);dispatch(setLoggedInUser({fullName,id,email,role}));navigate(\"/\");}else if(response.error){setError(response.error.data.errorMessages[0]);}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center\",children:[loading&&/*#__PURE__*/_jsx(MainLoader,{}),/*#__PURE__*/_jsxs(\"form\",{method:\"post\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 offset-sm-3 col-xs-12 mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter Username\",required:true,name:\"userName\",value:userInput.userName,onChange:handleUserInput})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 offset-sm-3 col-xs-12 mt-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Enter Password\",required:true,name:\"password\",value:userInput.password,onChange:handleUserInput})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",style:{width:\"200px\"},children:\"Login\"})]})]})]});}export default Login;","map":{"version":3,"names":["React","useState","useLoginUserMutation","inputHelper","jwt_decode","useDispatch","useNavigate","setLoggedInUser","MainLoader","jsx","_jsx","jsxs","_jsxs","Login","error","setError","loginUser","loading","setLoading","dispatch","navigate","userInput","setUserInput","userName","password","handleUserInput","e","tempData","handleSubmit","preventDefault","response","data","token","result","fullName","id","email","role","localStorage","setItem","errorMessages","className","children","method","onSubmit","type","placeholder","required","name","value","onChange","style","width"],"sources":["C:/redmango_frontend/react_redMango/src/Pages/Login.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useLoginUserMutation } from \"../Apis/authApi\";\r\nimport { inputHelper } from \"../Helper\";\r\nimport { apiResponse, userModel } from \"../Interfaces\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { setLoggedInUser } from \"../Storage/Redux/userAuthSlice\";\r\nimport { MainLoader } from \"../Components/Page/Common\";\r\n\r\nfunction Login() {\r\n  const [error, setError] = useState(\"\");\r\n  const [loginUser] = useLoginUserMutation();\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [userInput, setUserInput] = useState({\r\n    userName: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const handleUserInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const tempData = inputHelper(e, userInput);\r\n    setUserInput(tempData);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const response: apiResponse = await loginUser({\r\n      userName: userInput.userName,\r\n      password: userInput.password,\r\n    });\r\n    if (response.data) {\r\n      const { token } = response.data.result;\r\n      const { fullName, id, email, role }: userModel = jwt_decode(token);\r\n      localStorage.setItem(\"token\", token);\r\n      dispatch(setLoggedInUser({ fullName, id, email, role }));\r\n      navigate(\"/\");\r\n    } else if (response.error) {\r\n      setError(response.error.data.errorMessages[0]);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n  return (\r\n    <div className=\"container text-center\">\r\n      {loading && <MainLoader />}\r\n      <form method=\"post\" onSubmit={handleSubmit}>\r\n        <h1 className=\"mt-5\">Login</h1>\r\n        <div className=\"mt-5\">\r\n          <div className=\"col-sm-6 offset-sm-3 col-xs-12 mt-4\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Enter Username\"\r\n              required\r\n              name=\"userName\"\r\n              value={userInput.userName}\r\n              onChange={handleUserInput}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-sm-6 offset-sm-3 col-xs-12 mt-4\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Enter Password\"\r\n              required\r\n              name=\"password\"\r\n              value={userInput.password}\r\n              onChange={handleUserInput}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-2\">\r\n          {error && <p className=\"text-danger\">{error}</p>}\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-success\"\r\n            style={{ width: \"200px\" }}\r\n          >\r\n            Login\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}