{"ast":null,"code":"import React from\"react\";import{getStatusColor}from\"../../../Helper\";import{useNavigate}from\"react-router-dom\";import{SD_Roles,SD_Status}from\"../../../Utility/SD\";import{useSelector}from\"react-redux\";import{useState}from\"react\";import{useUpdateOrderHeaderMutation}from\"../../../Apis/orderApi\";import{MainLoader}from\"../Common\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function OrderSummary(_ref){var _data$cartItems,_data$cartTotal;let{data,userInput}=_ref;const badgeTypeColor=getStatusColor(data.status);const navigate=useNavigate();const userData=useSelector(state=>state.userAuthStore);const[loading,setIsLoading]=useState(false);const[updateOrderHeader]=useUpdateOrderHeaderMutation();const nextStatus=data.status===SD_Status.CONFIRMED?{color:\"info\",value:SD_Status.BEING_COOKED}:data.status===SD_Status.BEING_COOKED?{color:\"warning\",value:SD_Status.READY_FOR_PICKUP}:data.status===SD_Status.READY_FOR_PICKUP&&{color:\"success\",value:SD_Status.COMPLETED};const handleNextStatus=async()=>{setIsLoading(true);await updateOrderHeader({orderHeaderId:data.id,status:nextStatus.value});setIsLoading(false);};const handleCancel=async()=>{setIsLoading(true);await updateOrderHeader({orderHeaderId:data.id,status:SD_Status.CANCELLED});setIsLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[loading&&/*#__PURE__*/_jsx(MainLoader,{}),!loading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-success\",children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-outline-\".concat(badgeTypeColor,\" fs-6\"),children:data.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border py-3 px-2\",children:[\"Name : \",userInput.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border py-3 px-2\",children:[\"Email : \",userInput.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border py-3 px-2\",children:[\"Phone : \",userInput.phoneNumber]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border py-3 px-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-success\",children:\"Menu Items\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[(_data$cartItems=data.cartItems)===null||_data$cartItems===void 0?void 0:_data$cartItems.map((cartItem,index)=>{var _cartItem$menuItem,_cartItem$menuItem2,_cartItem$menuItem$pr,_cartItem$menuItem3,_cartItem$quantity;return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex w-100 justify-content-between\",children:[/*#__PURE__*/_jsx(\"p\",{children:(_cartItem$menuItem=cartItem.menuItem)===null||_cartItem$menuItem===void 0?void 0:_cartItem$menuItem.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",(_cartItem$menuItem2=cartItem.menuItem)===null||_cartItem$menuItem2===void 0?void 0:_cartItem$menuItem2.price,\" x \",cartItem.quantity,\" =\"]})]}),/*#__PURE__*/_jsxs(\"p\",{style:{width:\"70px\",textAlign:\"right\"},children:[\"$\",((_cartItem$menuItem$pr=(_cartItem$menuItem3=cartItem.menuItem)===null||_cartItem$menuItem3===void 0?void 0:_cartItem$menuItem3.price)!==null&&_cartItem$menuItem$pr!==void 0?_cartItem$menuItem$pr:0)*((_cartItem$quantity=cartItem.quantity)!==null&&_cartItem$quantity!==void 0?_cartItem$quantity:0)]})]},index);}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-danger\",style:{textAlign:\"right\"},children:[\"$\",(_data$cartTotal=data.cartTotal)===null||_data$cartTotal===void 0?void 0:_data$cartTotal.toFixed(2)]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mt-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>navigate(-1),children:\"Back to Orders\"}),userData.role==SD_Roles.ADMIN&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[data.status!==SD_Status.CANCELLED&&data.status!==SD_Status.COMPLETED&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger mx-2\",onClick:handleCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-\".concat(nextStatus.color),onClick:handleNextStatus,children:nextStatus.value})]})]})]})]});}export default OrderSummary;","map":{"version":3,"names":["React","getStatusColor","useNavigate","SD_Roles","SD_Status","useSelector","useState","useUpdateOrderHeaderMutation","MainLoader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderSummary","_ref","_data$cartItems","_data$cartTotal","data","userInput","badgeTypeColor","status","navigate","userData","state","userAuthStore","loading","setIsLoading","updateOrderHeader","nextStatus","CONFIRMED","color","value","BEING_COOKED","READY_FOR_PICKUP","COMPLETED","handleNextStatus","orderHeaderId","id","handleCancel","CANCELLED","children","className","concat","name","email","phoneNumber","cartItems","map","cartItem","index","_cartItem$menuItem","_cartItem$menuItem2","_cartItem$menuItem$pr","_cartItem$menuItem3","_cartItem$quantity","menuItem","price","quantity","style","width","textAlign","cartTotal","toFixed","onClick","role","ADMIN"],"sources":["C:/redmango_frontend/react_redMango/src/Components/Page/Order/OrderSummary.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { getStatusColor } from \"../../../Helper\";\r\nimport { cartItemModel } from \"../../../Interfaces\";\r\nimport { orderSummaryProps } from \"./orderSummaryProps\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { SD_Roles, SD_Status } from \"../../../Utility/SD\";\r\nimport { RootState } from \"../../../Storage/Redux/store\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useState } from \"react\";\r\nimport { useUpdateOrderHeaderMutation } from \"../../../Apis/orderApi\";\r\nimport { MainLoader } from \"../Common\";\r\n\r\nfunction OrderSummary({ data, userInput }: orderSummaryProps) {\r\n  const badgeTypeColor = getStatusColor(data.status!);\r\n  const navigate = useNavigate();\r\n  const userData = useSelector((state: RootState) => state.userAuthStore);\r\n  const [loading, setIsLoading] = useState(false);\r\n  const [updateOrderHeader] = useUpdateOrderHeaderMutation();\r\n  const nextStatus: any =\r\n    data.status! === SD_Status.CONFIRMED\r\n      ? { color: \"info\", value: SD_Status.BEING_COOKED }\r\n      : data.status! === SD_Status.BEING_COOKED\r\n      ? { color: \"warning\", value: SD_Status.READY_FOR_PICKUP }\r\n      : data.status! === SD_Status.READY_FOR_PICKUP && {\r\n          color: \"success\",\r\n          value: SD_Status.COMPLETED,\r\n        };\r\n\r\n  const handleNextStatus = async () => {\r\n    setIsLoading(true);\r\n    await updateOrderHeader({\r\n      orderHeaderId: data.id,\r\n      status: nextStatus.value,\r\n    });\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleCancel = async () => {\r\n    setIsLoading(true);\r\n    await updateOrderHeader({\r\n      orderHeaderId: data.id,\r\n      status: SD_Status.CANCELLED,\r\n    });\r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {loading && <MainLoader />}\r\n      {!loading && (\r\n        <>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <h3 className=\"text-success\">Order Summary</h3>\r\n            <span className={`btn btn-outline-${badgeTypeColor} fs-6`}>\r\n              {data.status}\r\n            </span>\r\n          </div>\r\n          <div className=\"mt-3\">\r\n            <div className=\"border py-3 px-2\">Name : {userInput.name}</div>\r\n            <div className=\"border py-3 px-2\">Email : {userInput.email}</div>\r\n            <div className=\"border py-3 px-2\">\r\n              Phone : {userInput.phoneNumber}\r\n            </div>\r\n            <div className=\"border py-3 px-2\">\r\n              <h4 className=\"text-success\">Menu Items</h4>\r\n              <div className=\"p-3\">\r\n                {data.cartItems?.map(\r\n                  (cartItem: cartItemModel, index: number) => {\r\n                    return (\r\n                      <div className=\"d-flex\" key={index}>\r\n                        <div className=\"d-flex w-100 justify-content-between\">\r\n                          <p>{cartItem.menuItem?.name}</p>\r\n                          <p>\r\n                            ${cartItem.menuItem?.price} x {cartItem.quantity} =\r\n                          </p>\r\n                        </div>\r\n                        <p style={{ width: \"70px\", textAlign: \"right\" }}>\r\n                          $\r\n                          {(cartItem.menuItem?.price ?? 0) *\r\n                            (cartItem.quantity ?? 0)}\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  }\r\n                )}\r\n\r\n                <hr />\r\n                <h4 className=\"text-danger\" style={{ textAlign: \"right\" }}>\r\n                  ${data.cartTotal?.toFixed(2)}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"d-flex justify-content-between align-items-center mt-3\">\r\n            <button className=\"btn btn-secondary\" onClick={() => navigate(-1)}>\r\n              Back to Orders\r\n            </button>\r\n            {userData.role == SD_Roles.ADMIN && (\r\n              <div className=\"d-flex\">\r\n                {data.status! !== SD_Status.CANCELLED &&\r\n                  data.status! !== SD_Status.COMPLETED && (\r\n                    <button\r\n                      className=\"btn btn-danger mx-2\"\r\n                      onClick={handleCancel}\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  )}\r\n                <button\r\n                  className={`btn btn-${nextStatus.color}`}\r\n                  onClick={handleNextStatus}\r\n                >\r\n                  {nextStatus.value}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderSummary;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}