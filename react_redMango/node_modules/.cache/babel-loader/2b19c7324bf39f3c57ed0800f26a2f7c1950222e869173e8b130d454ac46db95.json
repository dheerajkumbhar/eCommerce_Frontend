{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useSelector}from\"react-redux\";import{useInitiatePaymentMutation}from\"../../../Apis/paymentApi\";import{inputHelper}from\"../../../Helper\";import{MiniLoader}from\"../Common\";import{useNavigate}from\"react-router\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartPickUpDetails(){const[loading,setLoading]=useState(false);const shoppingCartFromStore=useSelector(state=>{var _state$shoppingCartSt;return(_state$shoppingCartSt=state.shoppingCartStore.cartItems)!==null&&_state$shoppingCartSt!==void 0?_state$shoppingCartSt:[];});const userData=useSelector(state=>state.userAuthStore);let grandTotal=0;let totalItems=0;const initialUserData={name:userData.fullName,email:userData.email,phoneNumber:\"\"};shoppingCartFromStore===null||shoppingCartFromStore===void 0?void 0:shoppingCartFromStore.map(cartItem=>{var _cartItem$quantity,_cartItem$menuItem$pr,_cartItem$menuItem,_cartItem$quantity2;totalItems+=(_cartItem$quantity=cartItem.quantity)!==null&&_cartItem$quantity!==void 0?_cartItem$quantity:0;grandTotal+=((_cartItem$menuItem$pr=(_cartItem$menuItem=cartItem.menuItem)===null||_cartItem$menuItem===void 0?void 0:_cartItem$menuItem.price)!==null&&_cartItem$menuItem$pr!==void 0?_cartItem$menuItem$pr:0)*((_cartItem$quantity2=cartItem.quantity)!==null&&_cartItem$quantity2!==void 0?_cartItem$quantity2:0);return null;});const navigate=useNavigate();const[userInput,setUserInput]=useState(initialUserData);const[initiatePayment]=useInitiatePaymentMutation();const handleUserInput=e=>{const tempData=inputHelper(e,userInput);setUserInput(tempData);};useEffect(()=>{setUserInput({name:userData.fullName,email:userData.email,phoneNumber:\"\"});},[userData]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);const{data}=await initiatePayment(userData.id);navigate(\"/payment\",{state:{apiResult:data===null||data===void 0?void 0:data.result,userInput}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"border pb-5 pt-3\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontWeight:\"300\"},className:\"text-center text-success\",children:\"Pickup Details\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"col-10 mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-3\",children:[\"Pickup Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userInput.name,className:\"form-control\",placeholder:\"name...\",name:\"name\",onChange:handleUserInput,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-3\",children:[\"Pickup Email\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:userInput.email,className:\"form-control\",placeholder:\"email...\",name:\"email\",onChange:handleUserInput,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-3\",children:[\"Pickup Phone Number\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:userInput.phoneNumber,className:\"form-control\",placeholder:\"phone number...\",name:\"phoneNumber\",onChange:handleUserInput,required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",style:{background:\"ghostwhite\"},children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Grand Total : $\",grandTotal.toFixed(2)]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"No of items : \",totalItems]})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-lg btn-success form-control mt-3\",disabled:loading||shoppingCartFromStore.length==0,children:loading?/*#__PURE__*/_jsx(MiniLoader,{}):\"Looks Good? Place Order!\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useSelector","useInitiatePaymentMutation","inputHelper","MiniLoader","useNavigate","jsx","_jsx","jsxs","_jsxs","CartPickUpDetails","loading","setLoading","shoppingCartFromStore","state","_state$shoppingCartSt","shoppingCartStore","cartItems","userData","userAuthStore","grandTotal","totalItems","initialUserData","name","fullName","email","phoneNumber","map","cartItem","_cartItem$quantity","_cartItem$menuItem$pr","_cartItem$menuItem","_cartItem$quantity2","quantity","menuItem","price","navigate","userInput","setUserInput","initiatePayment","handleUserInput","e","tempData","handleSubmit","preventDefault","data","id","apiResult","result","className","children","style","fontWeight","onSubmit","type","value","placeholder","onChange","required","background","toFixed","disabled","length"],"sources":["C:/redmango_frontend/react_redMango/src/Components/Page/Cart/CartPickUpDetails.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useInitiatePaymentMutation } from \"../../../Apis/paymentApi\";\r\nimport { inputHelper } from \"../../../Helper\";\r\nimport { apiResponse, cartItemModel } from \"../../../Interfaces\";\r\nimport { RootState } from \"../../../Storage/Redux/store\";\r\nimport { MiniLoader } from \"../Common\";\r\nimport { useNavigate } from \"react-router\";\r\n\r\nexport default function CartPickUpDetails() {\r\n  const [loading, setLoading] = useState(false);\r\n  const shoppingCartFromStore: cartItemModel[] = useSelector(\r\n    (state: RootState) => state.shoppingCartStore.cartItems ?? []\r\n  );\r\n  const userData = useSelector((state: RootState) => state.userAuthStore);\r\n\r\n  let grandTotal = 0;\r\n  let totalItems = 0;\r\n  const initialUserData = {\r\n    name: userData.fullName,\r\n    email: userData.email,\r\n    phoneNumber: \"\",\r\n  };\r\n  shoppingCartFromStore?.map((cartItem: cartItemModel) => {\r\n    totalItems += cartItem.quantity ?? 0;\r\n    grandTotal += (cartItem.menuItem?.price ?? 0) * (cartItem.quantity ?? 0);\r\n    return null;\r\n  });\r\n  const navigate = useNavigate();\r\n  const [userInput, setUserInput] = useState(initialUserData);\r\n  const [initiatePayment] = useInitiatePaymentMutation();\r\n  const handleUserInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const tempData = inputHelper(e, userInput);\r\n    setUserInput(tempData);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setUserInput({\r\n      name: userData.fullName,\r\n      email: userData.email,\r\n      phoneNumber: \"\",\r\n    });\r\n  }, [userData]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const { data }: apiResponse = await initiatePayment(userData.id);\r\n\r\n    navigate(\"/payment\", {\r\n      state: { apiResult: data?.result, userInput },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"border pb-5 pt-3\">\r\n      <h1 style={{ fontWeight: \"300\" }} className=\"text-center text-success\">\r\n        Pickup Details\r\n      </h1>\r\n      <hr />\r\n      <form onSubmit={handleSubmit} className=\"col-10 mx-auto\">\r\n        <div className=\"form-group mt-3\">\r\n          Pickup Name\r\n          <input\r\n            type=\"text\"\r\n            value={userInput.name}\r\n            className=\"form-control\"\r\n            placeholder=\"name...\"\r\n            name=\"name\"\r\n            onChange={handleUserInput}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group mt-3\">\r\n          Pickup Email\r\n          <input\r\n            type=\"email\"\r\n            value={userInput.email}\r\n            className=\"form-control\"\r\n            placeholder=\"email...\"\r\n            name=\"email\"\r\n            onChange={handleUserInput}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group mt-3\">\r\n          Pickup Phone Number\r\n          <input\r\n            type=\"number\"\r\n            value={userInput.phoneNumber}\r\n            className=\"form-control\"\r\n            placeholder=\"phone number...\"\r\n            name=\"phoneNumber\"\r\n            onChange={handleUserInput}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group mt-3\">\r\n          <div className=\"card p-3\" style={{ background: \"ghostwhite\" }}>\r\n            <h5>Grand Total : ${grandTotal.toFixed(2)}</h5>\r\n            <h5>No of items : {totalItems}</h5>\r\n          </div>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"btn btn-lg btn-success form-control mt-3\"\r\n          disabled={loading || shoppingCartFromStore.length == 0}\r\n        >\r\n          {loading ? <MiniLoader /> : \"Looks Good? Place Order!\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}